!function(w,d,I){function F(a,b,e){if(a){if(a.forEach)return a.forEach(b);for(var f=0,d=a.length;f<d;f++)b.call(e,a[f],f)}}function J(a,b){if(a)for(var e in a)e in a&&b(a[e],e)}function A(a,b){return d.extend(new (d.extend(function(){},{prototype:a})),b)}function B(a,b){for(var e in b)delete b[e];C(a,b)}function C(a,b){for(var e in a)b[e]=a[e]}function t(a){for(var b=1,e=arguments.length;b<e;b++)C(arguments[b],a);return a}function G(){var a,b,e,f=x.path(),d=x.search();return F(y,function(g){var m=g[1],q;if(q=!b){var k;q=g[0];g=g[1];var n={};if(q){for(var l=0;l<q.length;l++){var r=q[l];if(r.regexp&&r.regexp.test(f)){k=!0;var c=r.regexp.exec(f);if(r.names)for(var h=1,K=c.length;h<K;++h){var H=r.names[h-1],L=c[h];H&&(n[H]=L||"")}if(!r.prefix)break;f=f.replace(r.regexp,"")||"/"}}k=(g.run&&n&&g.run(D,t(n,d)),k?n:void 0)}else k=void 0;q=a=k}q&&(m["abstract"]?e=t({},d,a):(b=A(m,{params:t({},d,a,e),pathParams:a}),b.$$route=m))}),b||t({redirectTo:"/"},{params:{},pathParams:{}})}var g,u,m,k,z;document.querySelector&&(m=document.querySelector("[dota-view]"),u=d.element(m),k=u.attr("loaded"),z=k===location.pathname,k&&u.removeAttr("loaded"));var x,D,y=[],n={},E=!1,v=d.module("doTA.Router",["ng","doTA"]).provider("$route",function(){this.route=function(a,b){return y.push([a,b]),this};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$compile","$controller","$filter","doTA",function(a,b,e,f,t,v,w,q,y,A,l){function r(){var c=G(),h=n.current;c&&h&&c.$$route===h.$$route&&d.equals(c.pathParams,h.pathParams)&&!c.reloadOnSearch&&!E?(h.params=c.params,B(h.params,e),a.$broadcast("$routeUpdate",h)):(c||h)&&(E=!1,a.$broadcast("$routeChangeStart",c,h),n.current=c,c&&c.redirectTo&&(d.isString(c.redirectTo)?b.path(c.redirectTo).search(c.params).replace():b.url(c.redirectTo(c.pathParams,b.path(),b.search())).replace()),f.when(c).then(function(){if(c){var a,b,e=d.extend({},c.resolve);return J(e,function(a,b){z&&c.server&&(!0===c.server||!0===c.server[b])||(e[b]=d.isString(a)?t.get(a):t.invoke(a))}),d.isDefined(a=c.template)?d.isFunction(a)&&(a=a(c.params)):d.isDefined(b=c.templateUrl)&&(d.isFunction(b)&&(b=b(c.params)),d.isDefined(b)&&(c.loadedTemplateUrl=b,l.C[b]||(a=v.get(b,{cache:w}).then(function(a){return a.data})))),d.isDefined(a)&&(e.$template=a),f.all(e)}}).then(function(b){if(c===n.current){if(c){if(!c.$$route)return;c.locals=b;B(c.params,e)}a.$broadcast("$routeChangeSuccess",c,h);var d=c.$$route,f=d.templateUrl;if(g&&g.$destroy(),g=a.$new(),b.$scope=g,d.controller){var p=y(d.controller,b);d.controllerAs&&(g[d.controllerAs]=p);u.data("$ngControllerController",p);u.children().data("$ngControllerController",p)}if(!f)return g.$emit("$viewContentLoaded");p={debug:0,encode:0,optimize:1,loose:1,event:1};"object"==typeof d.options&&C(d.options,p);b=l.C[f]?l.C[f]:l.C[f]=l.compile(b.$template,p);f=b.id||l.U[f];k&&z?z=k=!1:(m.innerHTML=b(g,A),k&&(k=!1));p.compileAll||p.compileAll===I?q(m.contentDocument||m.childNodes)(g):p.compile&&F(m.querySelectorAll("[dota-pass]"),function(a){q(a)(scope)});p.model&&l.addNgModels(m,g,f);p.event&&l.addEvents(m,g,p.event,f);g.$emit("$viewContentLoaded")}},function(b){c===n.current&&a.$broadcast("$routeChangeError",c,h,b)}))}return x=b,D=a,n.reload=function(){E=!0;a.$evalAsync(r)},a.$on("$locationChangeSuccess",r),n}]});v.provider("$routeParams",function(){this.$get=function(){return{}}});v.provider("Router",function(){this.$get=["$location","$rootScope","$routeParams",function(a,b,d){return x=a,D=b,{update:function(a){w.location.pathname=w.location.href=a;a=n.current=G();return B(a.params,d),a}}}]});v.directive("dotaView",function(){return{terminal:!0,priority:1E4}})}(window,window.angular);
//# sourceMappingURL=doTA.Router.min.js.map
